<!--<h1>Users</h1>-->

<div class="text-center">
  <h1>Users</h1>
</div>

<div class="row justify-content-center">
  <div class="col-auto">
    <table class="table table-responsive table-bordered">
      <thead>
        <tr>
          <th>Avatar</th>
          <th>Username</th>
          <th>Email</th>
          <th>Listings</th>
          <th>Messages sent</th>
          <th>Messages received</th>
          <th>Created</th>
          <th>Updated</th>
          <!--<th colspan="3"></th>-->
        </tr>
      </thead>

      <tbody>
        <% @users.each do |user| %>
          <tr>
            <!--<td><%#= user.avatar %></td>-->
            <td><%= image_tag user.avatar.url, class: "rounded-circle shadow p-0 mb-2 bg-white rounded", width: "75px", alt: "avatar" %></td>
            <!--<td><%#= user.username %></td>-->
            <td><%= link_to user.username.capitalize, user_path(user) %></td>
            <td><%= user.email %></td>
            <td>
            <% user.listing_seller.each do |listing| %>
              <%# if listing.title.count != nil %>
                <ul style="margin-top:0; list-style-type:none;">
                  <li><%= link_to listing.title.capitalize, listing %></li>
                </ul>  
              <%# else %>
                <!--<td>None</td>-->
              <%# end %>
            <% end %>
            </td>

            <td>
            <% user.message_sender.each do |sent| %>
              <ul style="margin-top:0; list-style-type:none;">
                <li><%= link_to sent.body.capitalize, sent %></li>
              </ul>
            <% end %>
            </td>

            <td>
            <% user.message_recipient.each do |received| %>
              <ul style="margin-top:0; list-style-type:none;">
                <li><%= link_to received.body.capitalize, received %></li>
              </ul>
            <% end %>
            </td>

            <td><%= time_ago_in_words(user.created_at) %> ago</td>
            <td><%= time_ago_in_words(user.updated_at) %> ago</td>
            <%# if user_signed_in? && current_user.username == "admin" %>
            <!--<td><%#= link_to 'Show', user %></td>
            <td><%#= link_to 'Edit', edit_user_registration_path(user) %></td>
            <td><%#= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
            <%# end %>
          </tr>
        <% end %>
      </tbody>
  </table>
  </div>
</div>


<br>
<div class="text-center">
  <%#= link_to 'New user', new_user_path %>
  <%= link_to 'Back', :back %>
</div>
